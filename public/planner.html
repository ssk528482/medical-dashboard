<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Planner â€” Medical Study OS</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* â”€â”€ Topic chip styles â”€â”€ */
    .topic-chip {
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      background: #1e293b;
      color: #94a3b8;
      border: 1px solid #334155;
      transition: all 0.15s;
      white-space: nowrap;
    }
    .topic-chip.selected {
      background: #1e3a5f !important;
      color: #93c5fd !important;
      border-color: #3b82f6 !important;
    }
    .topic-chip.already-done {
      background: #1a3a1a;
      color: #4ade80;
      border-color: #166534;
    }
    /* Evening submitted card */
    .evening-submitted-card {
      background: linear-gradient(135deg, #0f2b1a, #0a1f12);
      border: 1px solid #16a34a;
      border-radius: 14px;
      padding: 16px;
      margin-bottom: 10px;
    }
    .evening-entry-line {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      padding: 6px 0;
      border-bottom: 1px solid #1a3a1a;
      font-size: 13px;
      color: #cbd5e1;
    }
    .evening-entry-line:last-child { border-bottom: none; }
    .entry-icon { font-size: 15px; flex-shrink: 0; margin-top: 1px; }
    /* Section separator */
    .form-section {
      background: #0f172a;
      border-radius: 12px;
      padding: 14px;
      margin-bottom: 12px;
      border: 1px solid #1e293b;
    }
    .form-section-title {
      font-weight: 700;
      font-size: 13px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    /* â”€â”€ Stopwatch â”€â”€ */
    .sw-block { background:#0a1628;border-top:1px solid #1e293b;border-radius:0 0 10px 10px;padding:10px 12px;margin-top:8px; }
    .sw-row   { display:flex;align-items:center;gap:10px;flex-wrap:wrap; }
    .sw-display { font-size:22px;font-weight:800;font-family:'SF Mono','Fira Code',monospace;min-width:86px;letter-spacing:1px; }
    .sw-target  { font-size:11px;color:#64748b;flex:1;min-width:60px; }
    .sw-status  { font-size:11px;font-weight:700;padding:2px 8px;border-radius:5px; }
    .sw-status.on-target { background:#052e16;color:#4ade80; }
    .sw-status.over      { background:#450a0a;color:#fca5a5; }
    .sw-status.under     { background:#1e3a5f;color:#93c5fd; }
    .sw-btn { padding:6px 14px;border-radius:8px;font-size:12px;font-weight:700;border:none;cursor:pointer;margin:0; }
    .sw-btn.start { background:#16a34a;color:white; }
    .sw-btn.pause { background:#d97706;color:white; }
    .sw-btn.reset { background:#334155;color:#94a3b8; }
    .sw-bar-wrap  { height:5px;background:#1e293b;border-radius:3px;margin-top:8px;overflow:hidden; }
    .sw-bar-fill  { height:100%;border-radius:3px;transition:width .8s linear; }
  </style>
</head>
<body>
<nav class="side-nav" id="side-nav">
  <button class="side-nav-toggle" id="side-nav-toggle" title="Toggle sidebar">â®</button>
  <div class="side-nav-brand">
    <span class="side-nav-brand-icon">ğŸ©º</span>
    <span class="side-nav-brand-text">Medical OS</span>
  </div>
    <div class="side-nav-items">
    <a href="index.html"      class="side-nav-item "     data-label="Home">     <span class="side-nav-icon">ğŸ </span><span class="side-nav-label">Home</span></a>
    <a href="planner.html"    class="side-nav-item active"  data-label="Planner">  <span class="side-nav-icon">ğŸ“…</span><span class="side-nav-label">Planner</span></a>
    <a href="editor.html"     class="side-nav-item "   data-label="Syllabus"> <span class="side-nav-icon">ğŸ“š</span><span class="side-nav-label">Syllabus</span></a>
    <a href="analytics.html"  class="side-nav-item " data-label="Stats">   <span class="side-nav-icon">ğŸ“Š</span><span class="side-nav-label">Stats</span></a>
    <a href="profile.html"    class="side-nav-item "  data-label="Profile">  <span class="side-nav-icon">ğŸ‘¤</span><span class="side-nav-label">Profile</span></a>
    <a href="review.html" class="side-nav-item " data-label="Review"><span class="side-nav-icon">ğŸ”</span><span class="side-nav-label">Review</span><span class="side-nav-review-badge" id="nav-review-badge" style="display:none"></span></a>
    <a href="browse.html" class="side-nav-item "    data-label="Cards">    <span class="side-nav-icon">ğŸƒ</span><span class="side-nav-label">Cards</span></a>
    <a href="notes.html"      class="side-nav-item "    data-label="Notes">    <span class="side-nav-icon">ğŸ“</span><span class="side-nav-label">Notes</span></a>
  </div>
</nav>
<script>
(function(){
  var nav = document.getElementById('side-nav');
  var btn = document.getElementById('side-nav-toggle');
  if (localStorage.getItem('navCollapsed') === '1') {
    nav.classList.add('collapsed');
    document.body.classList.add('nav-collapsed');
    if (btn) btn.textContent = 'â¯';
  }
  if (btn) btn.addEventListener('click', function() {
    var c = nav.classList.toggle('collapsed');
    document.body.classList.toggle('nav-collapsed', c);
    btn.textContent = c ? 'â¯' : 'â®';
    localStorage.setItem('navCollapsed', c ? '1' : '0');
  });
})();
</script>

<script src="router.js"></script>

<h1>ğŸ“‹ Daily Planner</h1>

<!-- Morning Plan -->
<div class="card">
  <div class="section-title">â˜€ï¸ Morning Planner</div>
  <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
    <div>
      <label style="font-size:12px;color:#94a3b8;display:block;margin-bottom:3px;">Hours Available</label>
      <input type="number" id="dailyHours" style="width:90px;" min="1" max="16" placeholder="hrs">
    </div>
    <div style="display:flex;gap:8px;align-items:flex-end;padding-top:18px;">
      <button id="generateButton" onclick="generatePlan()">Generate Plan</button>
      <button onclick="resetTodayPlan()" style="background:#ef4444;font-size:12px;padding:8px 10px;margin-top:0;">Reset</button>
    </div>
  </div>
  <div id="planOutput" style="margin-top:10px;"></div>
</div>

<!-- Heatmap -->
<div class="card">
  <div class="section-title">ğŸ“… 60-Day Consistency</div>
  <div id="heatmapContainer"></div>
</div>

<!-- Evening Update -->
<div class="card" id="eveningUpdateCard">
  <div class="section-title" style="margin-bottom:0;">ğŸŒ™ Evening Update</div>
  <div style="font-size:11px;color:#475569;margin-bottom:14px;">Log what you completed today</div>
  <div id="eveningUpdateInner"></div>
</div>

<!-- Bottom Nav (5 items) -->


<script src="utils.js"></script>
<script src="data.js"></script>
<script src="revisionEngine.js"></script>
<script src="scheduler.js"></script>
<script src="intelligence.js"></script>
<script src="charts.js"></script>
<script src="stopwatch.js"></script>
<script src="supabase.js"></script>
<script src="cardSync.js"></script>
<script src="noteSync.js"></script>
<script src="app.js"></script>
<script>
  // Init planner page
  document.addEventListener("DOMContentLoaded", function() {
    swAutoSaveYesterday();
    if (typeof renderSavedPlan    === "function") renderSavedPlan();
    if (typeof renderHeatmap      === "function") renderHeatmap();
    if (typeof renderEveningUpdate === "function") renderEveningUpdate();
    swInit();
  });
</script>

</body>
</html>
